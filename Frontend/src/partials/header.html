<meta name="google" content="notranslate" />
<meta name="translator" content="Google Translate" />
<style>
  .flag-button.active .flag-icon {
    color: #EF4444;
    fill: #EF4444;
  }
  
  .flag-button:hover .flag-icon {
    color: #EF4444;
  }
   .language-selector {
      position: relative;
      display: flex;
      align-items: center;
      min-width: 120px;
      max-width: 150px;
    }

    .translate-select {
      width: 100%;
      padding: 4px 24px 4px 24px;
      border: none;
      background-color: transparent;
      color: #374151;
      cursor: pointer;
      font-size: 14px;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }
    
    .translate-select:focus {
      outline: none;
    }

    .goog-te-gadget {
      font-family: system-ui, -apple-system, sans-serif;
      color: #374151;
    }

    /* Hide everything except the select dropdown */
    .goog-te-gadget > span,
    .goog-te-gadget img {
      display: none !important;
    }

    .goog-te-gadget .goog-te-combo {
      margin: 0 !important;
    }

    /* Globe icon before select */
   /* .language-icon::before {
      content: 'üåê';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      color: #6B7280;
      font-size: 14px;
      pointer-events: none;
    }*/

    /* Custom dropdown arrow 
    .language-selector::after {
      content: '‚ñæ';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      color: #6B7280;
      font-size: 12px;
      pointer-events: none;
    }*/

    /* Additional styles to hide Google branding */
    .VIpgJd-ZVi9od-l4eHX-hSRGPd,
    .VIpgJd-ZVi9od-ORHb-OEVmcd {
      display: none !important;
    }</style>
    
<header class="sticky top-0 z-999 flex w-full bg-white drop-shadow-1 dark:bg-boxdark dark:drop-shadow-none">
  <div class="flex flex-grow items-center justify-between px-4 py-4 shadow-2 md:px-6 2xl:px-11">
    <div class="flex items-center gap-2 sm:gap-4">
      <!-- Hamburger Toggle BTN -->
      <button
        class="z-99999 block rounded-sm border border-stroke bg-white p-1.5 shadow-sm dark:border-strokedark dark:bg-boxdark"
        @click.stop="sidebarToggle = !sidebarToggle">
        <span class="relative block h-5.5 w-5.5 cursor-pointer">
          <span class="du-block absolute right-0 h-full w-full">
            <span
              class="relative left-0 top-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-[0] duration-200 ease-in-out dark:bg-white"
              :class="{ '!w-full delay-300': !sidebarToggle }"></span>
            <span
              class="relative left-0 top-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-150 duration-200 ease-in-out dark:bg-white"
              :class="{ '!w-full delay-400': !sidebarToggle }"></span>
            <span
              class="relative left-0 top-0 my-1 block h-0.5 w-0 rounded-sm bg-black delay-200 duration-200 ease-in-out dark:bg-white"
              :class="{ '!w-full delay-500': !sidebarToggle }"></span>
          </span>
          <span class="du-block absolute right-0 h-full w-full rotate-45">
            <span
              class="absolute left-2.5 top-0 block h-full w-0.5 rounded-sm bg-black delay-300 duration-200 ease-in-out dark:bg-white"
              :class="{ '!h-0 delay-[0]': !sidebarToggle }"></span>
            <span
              class="delay-400 absolute left-0 top-2.5 block h-0.5 w-full rounded-sm bg-black duration-200 ease-in-out dark:bg-white"
              :class="{ '!h-0 dealy-200': !sidebarToggle }"></span>
          </span>
        </span>
      </button>
      <!-- Hamburger Toggle BTN -->
      <a class="block flex-shrink-0 lg:hidden" href="index.html">
        <img src="./images/logo/logo-icon.svg" alt="Logo" />
      </a>
    </div>



<!-- Nouvelle version √† AJOUTER -->
<div class="hidden sm:block">
  <div x-data="search" class="relative w-full max-w-2xl">
    <!-- Search Input -->
    <div class="relative">
      <input
        type="text"
        x-model="query"
        placeholder="Search..."
        class="w-full px-80 py-2 pl-10 text-gray-700 bg-white border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
      >
      <div class="absolute inset-y-0 left-0 flex items-center pl-3">
        <svg class="fill-body hover:fill-primary dark:fill-bodydark dark:hover:fill-primary" width="20" height="20" viewBox="0 0 20 20">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M9.16666 3.33332C5.945 3.33332 3.33332 5.945 3.33332 9.16666C3.33332 12.3883 5.945 15 9.16666 15C12.3883 15 15 12.3883 15 9.16666C15 5.945 12.3883 3.33332 9.16666 3.33332Z"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M13.2857 13.2857C13.6112 12.9603 14.1388 12.9603 14.4642 13.2857L18.0892 16.9107C18.4147 17.2362 18.4147 17.7638 18.0892 18.0892C17.7638 18.4147 17.2362 18.4147 16.9107 18.0892L13.2857 14.4642C12.9603 14.1388 12.9603 13.6112 13.2857 13.2857Z"/>
        </svg>
      </div>
    </div>

    <!-- Results Dropdown -->
    <div
      x-show="showResults"
      class="absolute w-full mt-2 bg-white rounded-lg shadow-xl border border-gray-200 z-50"
      @click.away="showResults = false"
    >
      <!-- Loading State -->
      <div x-show="loading" class="p-4 text-center text-gray-500">
        Loading...
      </div>

      <!-- Error Message -->
      <div x-show="error" class="p-4 text-sm text-red-600 bg-red-50" x-text="error"></div>

      <!-- Results List -->
      <div x-show="!error && results.length > 0" class="max-h-96 overflow-y-auto">
        <template x-for="result in results" :key="result.id">
          <button
          @click="handleResultClick(result)"
            class="w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 border-b border-gray-100 last:border-0"
          >
          <div class="flex-1">
              <p class="text-sm font-medium text-gray-900" x-text="result.title || 'Untitled'"></p>
              <p class="text-sm text-gray-500" x-text="result.subtitle || ''"></p>
          </div>
          <span
              class="ml-2 px-2 py-1 text-xs font-medium bg-gray-100 rounded-full text-gray-700"
              x-text="result.type"
          ></span>
      </button>
      </template>
      </div>

      <!-- No Results -->
      <div 
        x-show="!error && !loading && results.length === 0 && query.trim().length > 0" 
        class="p-2 text-sm text-gray-500 text-center"
      >
        No results found for "<span x-text="query"></span>"
      </div>
    </div>
  </div>
</div>

    <div class="flex items-center gap-3 2xsm:gap-7">
      <ul class="flex items-center gap-2 2xsm:gap-4">
            <!--Switcher of language-->

            <!--<li class="relative">
              <div class="language-selector">
                <div class="language-icon"></div>
                <div id="google_translate_element" class="w-full"></div>
              </div>
            </li>
        <li>-->
          <!-- Dark Mode Toggler -->
          <label :class="darkMode ? 'bg-primary' : 'bg-stroke'" class="relative m-0 block h-7.5 w-14 rounded-full">
            <input type="checkbox" :value="darkMode" @change="darkMode = !darkMode"
              class="absolute top-0 z-50 m-0 h-full w-full cursor-pointer opacity-0" />
            <span :class="darkMode && '!right-1 !translate-x-full'"
              class="absolute left-1 top-1/2 flex h-6 w-6 -translate-y-1/2 translate-x-0 items-center justify-center rounded-full bg-white shadow-switcher duration-75 ease-linear">
              <span class="dark:hidden">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.99992 12.6666C10.5772 12.6666 12.6666 10.5772 12.6666 7.99992C12.6666 5.42259 10.5772 3.33325 7.99992 3.33325C5.42259 3.33325 3.33325 5.42259 3.33325 7.99992C3.33325 10.5772 5.42259 12.6666 7.99992 12.6666Z"
                    fill="#969AA1" />
                  <path
                    d="M8.00008 15.3067C7.63341 15.3067 7.33342 15.0334 7.33342 14.6667V14.6134C7.33342 14.2467 7.63341 13.9467 8.00008 13.9467C8.36675 13.9467 8.66675 14.2467 8.66675 14.6134C8.66675 14.9801 8.36675 15.3067 8.00008 15.3067ZM12.7601 13.4267C12.5867 13.4267 12.4201 13.3601 12.2867 13.2334L12.2001 13.1467C11.9401 12.8867 11.9401 12.4667 12.2001 12.2067C12.4601 11.9467 12.8801 11.9467 13.1401 12.2067L13.2267 12.2934C13.4867 12.5534 13.4867 12.9734 13.2267 13.2334C13.1001 13.3601 12.9334 13.4267 12.7601 13.4267ZM3.24008 13.4267C3.06675 13.4267 2.90008 13.3601 2.76675 13.2334C2.50675 12.9734 2.50675 12.5534 2.76675 12.2934L2.85342 12.2067C3.11342 11.9467 3.53341 11.9467 3.79341 12.2067C4.05341 12.4667 4.05341 12.8867 3.79341 13.1467L3.70675 13.2334C3.58008 13.3601 3.40675 13.4267 3.24008 13.4267ZM14.6667 8.66675H14.6134C14.2467 8.66675 13.9467 8.36675 13.9467 8.00008C13.9467 7.63341 14.2467 7.33342 14.6134 7.33342C14.9801 7.33342 15.3067 7.63341 15.3067 8.00008C15.3067 8.36675 15.0334 8.66675 14.6667 8.66675ZM1.38675 8.66675H1.33341C0.966748 8.66675 0.666748 8.36675 0.666748 8.00008C0.666748 7.63341 0.966748 7.33342 1.33341 7.33342C1.70008 7.33342 2.02675 7.63341 2.02675 8.00008C2.02675 8.36675 1.75341 8.66675 1.38675 8.66675ZM12.6734 3.99341C12.5001 3.99341 12.3334 3.92675 12.2001 3.80008C11.9401 3.54008 11.9401 3.12008 12.2001 2.86008L12.2867 2.77341C12.5467 2.51341 12.9667 2.51341 13.2267 2.77341C13.4867 3.03341 13.4867 3.45341 13.2267 3.71341L13.1401 3.80008C13.0134 3.92675 12.8467 3.99341 12.6734 3.99341ZM3.32675 3.99341C3.15341 3.99341 2.98675 3.92675 2.85342 3.80008L2.76675 3.70675C2.50675 3.44675 2.50675 3.02675 2.76675 2.76675C3.02675 2.50675 3.44675 2.50675 3.70675 2.76675L3.79341 2.85342C4.05341 3.11342 4.05341 3.53341 3.79341 3.79341C3.66675 3.92675 3.49341 3.99341 3.32675 3.99341ZM8.00008 2.02675C7.63341 2.02675 7.33342 1.75341 7.33342 1.38675V1.33341C7.33342 0.966748 7.63341 0.666748 8.00008 0.666748C8.36675 0.666748 8.66675 0.966748 8.66675 1.33341C8.66675 1.70008 8.36675 2.02675 8.00008 2.02675Z"
                    fill="#969AA1" />
                </svg>
              </span>
              <span class="hidden dark:inline-block">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M14.3533 10.62C14.2466 10.44 13.9466 10.16 13.1999 10.2933C12.7866 10.3667 12.3666 10.4 11.9466 10.38C10.3933 10.3133 8.98659 9.6 8.00659 8.5C7.13993 7.53333 6.60659 6.27333 6.59993 4.91333C6.59993 4.15333 6.74659 3.42 7.04659 2.72666C7.33993 2.05333 7.13326 1.7 6.98659 1.55333C6.83326 1.4 6.47326 1.18666 5.76659 1.48C3.03993 2.62666 1.35326 5.36 1.55326 8.28666C1.75326 11.04 3.68659 13.3933 6.24659 14.28C6.85993 14.4933 7.50659 14.62 8.17326 14.6467C8.27993 14.6533 8.38659 14.66 8.49326 14.66C10.7266 14.66 12.8199 13.6067 14.1399 11.8133C14.5866 11.1933 14.4666 10.8 14.3533 10.62Z"
                    fill="#969AA1" />
                </svg>
              </span>
            </span>
          </label>
          <!-- Dark Mode Toggler -->
        </li>
          <!-- Reminder Menu Area -->
         
<li class="relative" x-data="{ dropdownOpen: false }" @click.outside="dropdownOpen = false">
  <a class="relative flex h-8.5 w-8.5 items-center justify-center rounded-full border-[0.5px] border-stroke bg-gray hover:text-primary dark:border-strokedark dark:bg-meta-4 dark:text-white"
    href="#" @click.prevent="dropdownOpen = !dropdownOpen; getAllReminders();">
    <svg class="fill-current duration-300 ease-in-out" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z" fill="currentColor"/>
      <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </a>
  <span id="reminderCount" 
  class="absolute -top-0.5 right-0 z-1 h-4 w-4 rounded-full bg-red-500 text-white text-xs flex items-center justify-center">
0
</span>
  <!-- Dropdown Start -->
  <div x-show="dropdownOpen"
    class="absolute -right-27 mt-2.5 flex h-90 w-75 flex-col rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark sm:right-0 sm:w-80">
    <div class="px-4.5 py-3">
      <div class="flex justify-between items-center">
        <h5 class="text-sm font-medium text-bodydark2">Reminders</h5>
        <button @click="showNewReminderModal()" 
              class="text-sm text-green-500 hover:text-green-600">
        New
      </button>
        <button @click="window.location.href='reminders.html'" 
                class="text-sm text-blue-500 hover:text-blue-600">
          View All
        </button>
      </div>
    </div>
  <!-- Reminders Section -->
<!-- Reminders Section -->
<div x-data="reminderApp()" x-init="init()" class="bg-white rounded-lg p-4 shadow">
  
  <!-- Smart Lists -->
  <div class="space-y-2 mb-6">
      <div @click="$store.reminders = await fetchReminders('today')" 
           class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
          <svg class="w-5 h-5 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          <span class="flex-1">Today</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-sm" x-text="$store.counts.today">0</span>
      </div>

      <div @click="$store.reminders = await fetchReminders('scheduled')" 
           class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
          <svg class="w-5 h-5 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <span class="flex-1">Scheduled</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-sm" x-text="$store.counts.scheduled">0</span>
      </div>

      <div @click="$store.reminders = await fetchReminders('flagged')" 
           class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
          <svg class="w-5 h-5 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"></path>
          </svg>
          <span class="flex-1">Flagged</span>
          <span 
    class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-sm" 
    x-text="$store.counts.flagged"
    data-flag-count
>0</span>     </div>

      <div @click="$store.reminders = await fetchReminders('completed')" 
           class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
          <svg class="w-5 h-5 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <span class="flex-1">Completed</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-sm" x-text="counts.completed">0</span>
      </div>
  </div>
    
  </div>
  <!-- Dropdown End -->
</li>
        <!-- Notification Menu Area -->
        <li class="relative" x-data="{ dropdownOpen: false, notifying: true }" @click.outside="dropdownOpen = false">
          <a class="relative flex h-8.5 w-8.5 items-center justify-center rounded-full border-[0.5px] border-stroke bg-gray hover:text-primary dark:border-strokedark dark:bg-meta-4 dark:text-white"
            href="#" @click.prevent="dropdownOpen = ! dropdownOpen; notifying = false; getNotifications(); ">
            <span :class="!notifying && 'hidden'" class="absolute -top-0.5 right-0 z-1 h-2 w-2 rounded-full bg-meta-1">
              <span
                class="absolute -z-1 inline-flex h-full w-full animate-ping rounded-full bg-meta-1 opacity-75"></span>
            </span>

            <svg class="fill-current duration-300 ease-in-out" width="18" height="18" viewBox="0 0 18 18" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M16.1999 14.9343L15.6374 14.0624C15.5249 13.8937 15.4687 13.7249 15.4687 13.528V7.67803C15.4687 6.01865 14.7655 4.47178 13.4718 3.31865C12.4312 2.39053 11.0812 1.7999 9.64678 1.6874V1.1249C9.64678 0.787402 9.36553 0.478027 8.9999 0.478027C8.6624 0.478027 8.35303 0.759277 8.35303 1.1249V1.65928C8.29678 1.65928 8.24053 1.65928 8.18428 1.6874C4.92178 2.05303 2.4749 4.66865 2.4749 7.79053V13.528C2.44678 13.8093 2.39053 13.9499 2.33428 14.0343L1.7999 14.9343C1.63115 15.2155 1.63115 15.553 1.7999 15.8343C1.96865 16.0874 2.2499 16.2562 2.55928 16.2562H8.38115V16.8749C8.38115 17.2124 8.6624 17.5218 9.02803 17.5218C9.36553 17.5218 9.6749 17.2405 9.6749 16.8749V16.2562H15.4687C15.778 16.2562 16.0593 16.0874 16.228 15.8343C16.3968 15.553 16.3968 15.2155 16.1999 14.9343ZM3.23428 14.9905L3.43115 14.653C3.5999 14.3718 3.68428 14.0343 3.74053 13.6405V7.79053C3.74053 5.31553 5.70928 3.23428 8.3249 2.95303C9.92803 2.78428 11.503 3.2624 12.6562 4.2749C13.6687 5.1749 14.2312 6.38428 14.2312 7.67803V13.528C14.2312 13.9499 14.3437 14.3437 14.5968 14.7374L14.7655 14.9905H3.23428Z"
                fill="" />
            </svg>
          </a>

          <!-- Dropdown Start -->
          <div x-show="dropdownOpen"
            class="absolute -right-27 mt-2.5 flex h-90 w-75 flex-col rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark sm:right-0 sm:w-80">
            <div class="px-4.5 py-3">
              <h5 class="text-sm font-medium text-bodydark2">Notification</h5>
            </div>

            <ul id="notification" class="flex h-auto flex-col overflow-y-auto">
                <!-- Les notifications seront charg√©es ici -->
              <!-- <li>
                <a
                  class="flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="#"
                >
                  <p class="text-sm">
                    <span class="text-black dark:text-white"
                      >Edit your information in a swipe</span
                    >
                    Sint occaecat cupidatat non proident, sunt in culpa qui
                    officia deserunt mollit anim.
                  </p>

                  <p class="text-xs">12 May, 2025</p>
                </a>
              </li>
              <li>
                <a
                  class="flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="#"
                >
                  <p class="text-sm">
                    <span class="text-black dark:text-white"
                      >It is a long established fact</span
                    >
                    that a reader will be distracted by the readable.
                  </p>

                  <p class="text-xs">24 Feb, 2025</p>
                </a>
              </li>
              <li>
                <a
                  class="flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="#"
                >
                  <p class="text-sm">
                    <span class="text-black dark:text-white"
                      >There are many variations</span
                    >
                    of passages of Lorem Ipsum available, but the majority have
                    suffered
                  </p>

                  <p class="text-xs">04 Jan, 2025</p>
                </a>
              </li>
              <li>
                <a
                  class="flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="#"
                >
                  <p class="text-sm">
                    <span class="text-black dark:text-white"
                      >There are many variations</span
                    >
                    of passages of Lorem Ipsum available, but the majority have
                    suffered
                  </p>

                  <p class="text-xs">01 Dec, 2024</p>
                </a>
              </li> -->
            </ul>
          </div>
          <!-- Dropdown End -->
        </li>
        <!-- Notification Menu Area -->

        <!-- Chat Notification Area -->
        <li class="relative" x-data="{ dropdownOpen: false, notifying: true }" @click.outside="dropdownOpen = false">
          <a class="relative flex h-8.5 w-8.5 items-center justify-center rounded-full border-[0.5px] border-stroke bg-gray hover:text-primary dark:border-strokedark dark:bg-meta-4 dark:text-white"
            href="#" @click.prevent="dropdownOpen = ! dropdownOpen; notifying = false">
            <span :class="!notifying && 'hidden'"
              class="absolute -right-0.5 -top-0.5 z-1 h-2 w-2 rounded-full bg-meta-1">
              <span
                class="absolute -z-1 inline-flex h-full w-full animate-ping rounded-full bg-meta-1 opacity-75"></span>
            </span>

            <svg class="fill-current duration-300 ease-in-out" width="18" height="18" viewBox="0 0 18 18" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M10.9688 1.57495H7.03135C3.43135 1.57495 0.506348 4.41558 0.506348 7.90308C0.506348 11.3906 2.75635 13.8375 8.26885 16.3125C8.40947 16.3687 8.52197 16.3968 8.6626 16.3968C8.85947 16.3968 9.02822 16.3406 9.19697 16.2281C9.47822 16.0593 9.64697 15.75 9.64697 15.4125V14.2031H10.9688C14.5688 14.2031 17.522 11.3625 17.522 7.87495C17.522 4.38745 14.5688 1.57495 10.9688 1.57495ZM10.9688 12.9937H9.3376C8.80322 12.9937 8.35322 13.4437 8.35322 13.9781V15.0187C3.6001 12.825 1.74385 10.8 1.74385 7.9312C1.74385 5.14683 4.10635 2.8687 7.03135 2.8687H10.9688C13.8657 2.8687 16.2563 5.14683 16.2563 7.9312C16.2563 10.7156 13.8657 12.9937 10.9688 12.9937Z"
                fill="" />
              <path
                d="M5.42812 7.28442C5.0625 7.28442 4.78125 7.56567 4.78125 7.9313C4.78125 8.29692 5.0625 8.57817 5.42812 8.57817C5.79375 8.57817 6.075 8.29692 6.075 7.9313C6.075 7.56567 5.79375 7.28442 5.42812 7.28442Z"
                fill="" />
              <path
                d="M9.00015 7.28442C8.63452 7.28442 8.35327 7.56567 8.35327 7.9313C8.35327 8.29692 8.63452 8.57817 9.00015 8.57817C9.33765 8.57817 9.64702 8.29692 9.64702 7.9313C9.64702 7.56567 9.33765 7.28442 9.00015 7.28442Z"
                fill="" />
              <path
                d="M12.5719 7.28442C12.2063 7.28442 11.925 7.56567 11.925 7.9313C11.925 8.29692 12.2063 8.57817 12.5719 8.57817C12.9375 8.57817 13.2188 8.29692 13.2188 7.9313C13.2188 7.56567 12.9094 7.28442 12.5719 7.28442Z"
                fill="" />
            </svg>
          </a>

          <!-- Dropdown Start -->
          <div x-show="dropdownOpen"
            class="absolute -right-16 mt-2.5 flex h-90 w-75 flex-col rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark sm:right-0 sm:w-80">
            <div class="px-4.5 py-3">
              <h5 class="text-sm font-medium text-bodydark2">Messages</h5>
            </div>

            <ul class="flex h-auto flex-col overflow-y-auto">
              <li>
                <a class="flex gap-4.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="messages.html">
                  <div class="h-12.5 w-12.5 rounded-full">
                    <img src="./images/user/user-02.png" alt="User" />
                  </div>

                  <div>
                    <h6 class="text-sm font-medium text-black dark:text-white">
                      Mariya Desoja
                    </h6>
                    <p class="text-sm">I like your confidence üí™</p>
                    <p class="text-xs">2min ago</p>
                  </div>
                </a>
              </li>
              <li>
                <a class="flex gap-4.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="messages.html">
                  <div class="h-12.5 w-12.5 rounded-full">
                    <img src="./images/user/user-01.png" alt="User" />
                  </div>

                  <div>
                    <h6 class="text-sm font-medium text-black dark:text-white">
                      Robert Jhon
                    </h6>
                    <p class="text-sm">Can you share your offer?</p>
                    <p class="text-xs">10min ago</p>
                  </div>
                </a>
              </li>
              <li>
                <a class="flex gap-4.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="messages.html">
                  <div class="h-12.5 w-12.5 rounded-full">
                    <img src="./images/user/user-03.png" alt="User" />
                  </div>

                  <div>
                    <h6 class="text-sm font-medium text-black dark:text-white">
                      Henry Dholi
                    </h6>
                    <p class="text-sm">I cam across your profile and...</p>
                    <p class="text-xs">1day ago</p>
                  </div>
                </a>
              </li>
              <li>
                <a class="flex gap-4.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="messages.html">
                  <div class="h-12.5 w-12.5 rounded-full">
                    <img src="./images/user/user-04.png" alt="User" />
                  </div>

                  <div>
                    <h6 class="text-sm font-medium text-black dark:text-white">
                      Cody Fisher
                    </h6>
                    <p class="text-sm">I‚Äôm waiting for you response!</p>
                    <p class="text-xs">5days ago</p>
                  </div>
                </a>
              </li>
              <li>
                <a class="flex gap-4.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
                  href="messages.html">
                  <div class="h-12.5 w-12.5 rounded-full">
                    <img src="./images/user/user-02.png" alt="User" />
                  </div>

                  <div>
                    <h6 class="text-sm font-medium text-black dark:text-white">
                      Mariya Desoja
                    </h6>
                    <p class="text-sm">I like your confidence üí™</p>
                    <p class="text-xs">2min ago</p>
                  </div>
                </a>
              </li>
            </ul>
          </div>
          <!-- Dropdown End -->
        </li>
        <!-- Chat Notification Area -->
      </ul>

      <!-- User Area -->
      <div class="relative" x-data="{ dropdownOpen: false }" @click.outside="dropdownOpen = false">
        <a class="flex items-center gap-4" href="#" @click.prevent="dropdownOpen = ! dropdownOpen">
          <span class="hidden text-right lg:block">
            <span id="recruiterName" class="block text-sm font-medium text-black dark:text-white">
            </span>
            <span id="recruiterPosition" class="block text-xs font-medium"></span>
          </span>

          <span class="h-12 w-12 rounded-full">
            <img id="imgUser" alt="User" />
          </span>

          <svg :class="dropdownOpen && 'rotate-180'" class="hidden fill-current sm:block" width="12" height="8"
            viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M0.410765 0.910734C0.736202 0.585297 1.26384 0.585297 1.58928 0.910734L6.00002 5.32148L10.4108 0.910734C10.7362 0.585297 11.2638 0.585297 11.5893 0.910734C11.9147 1.23617 11.9147 1.76381 11.5893 2.08924L6.58928 7.08924C6.26384 7.41468 5.7362 7.41468 5.41077 7.08924L0.410765 2.08924C0.0853277 1.76381 0.0853277 1.23617 0.410765 0.910734Z"
              fill="" />
          </svg>
        </a>

        <!-- Dropdown Start -->
        <div x-show="dropdownOpen"
          class="absolute right-0 mt-4 flex w-62.5 flex-col rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark">
          <ul class="flex flex-col gap-5 border-b border-stroke px-6 py-7.5 dark:border-strokedark">
            <li>
              <a onclick="profileRecruiter()"
                class="flex cursor-pointer items-center gap-3.5 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base">
                <svg class="fill-current" width="22" height="22" viewBox="0 0 22 22" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M11 9.62499C8.42188 9.62499 6.35938 7.59687 6.35938 5.12187C6.35938 2.64687 8.42188 0.618744 11 0.618744C13.5781 0.618744 15.6406 2.64687 15.6406 5.12187C15.6406 7.59687 13.5781 9.62499 11 9.62499ZM11 2.16562C9.28125 2.16562 7.90625 3.50624 7.90625 5.12187C7.90625 6.73749 9.28125 8.07812 11 8.07812C12.7188 8.07812 14.0938 6.73749 14.0938 5.12187C14.0938 3.50624 12.7188 2.16562 11 2.16562Z"
                    fill="" />
                  <path
                    d="M17.7719 21.4156H4.2281C3.5406 21.4156 2.9906 20.8656 2.9906 20.1781V17.0844C2.9906 13.7156 5.7406 10.9656 9.10935 10.9656H12.925C16.2937 10.9656 19.0437 13.7156 19.0437 17.0844V20.1781C19.0094 20.8312 18.4594 21.4156 17.7719 21.4156ZM4.53748 19.8687H17.4969V17.0844C17.4969 14.575 15.4344 12.5125 12.925 12.5125H9.07498C6.5656 12.5125 4.5031 14.575 4.5031 17.0844V19.8687H4.53748Z"
                    fill="" />
                </svg>
                My Profile
              </a>
            </li>
            <li>
             <!-- <a href="messages.html"
                class="flex items-center gap-3.5 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base">
                <svg class="fill-current" width="22" height="22" viewBox="0 0 22 22" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M17.6687 1.44374C17.1187 0.893744 16.4312 0.618744 15.675 0.618744H7.42498C6.25623 0.618744 5.25935 1.58124 5.25935 2.78437V4.12499H4.29685C3.88435 4.12499 3.50623 4.46874 3.50623 4.91562C3.50623 5.36249 3.84998 5.70624 4.29685 5.70624H5.25935V10.2781H4.29685C3.88435 10.2781 3.50623 10.6219 3.50623 11.0687C3.50623 11.4812 3.84998 11.8594 4.29685 11.8594H5.25935V16.4312H4.29685C3.88435 16.4312 3.50623 16.775 3.50623 17.2219C3.50623 17.6687 3.84998 18.0125 4.29685 18.0125H5.25935V19.25C5.25935 20.4187 6.22185 21.4156 7.42498 21.4156H15.675C17.2218 21.4156 18.4937 20.1437 18.5281 18.5969V3.47187C18.4937 2.68124 18.2187 1.95937 17.6687 1.44374ZM16.9469 18.5625C16.9469 19.2844 16.3625 19.8344 15.6406 19.8344H7.3906C7.04685 19.8344 6.77185 19.5594 6.77185 19.2156V17.875H8.6281C9.0406 17.875 9.41873 17.5312 9.41873 17.0844C9.41873 16.6375 9.07498 16.2937 8.6281 16.2937H6.77185V11.7906H8.6281C9.0406 11.7906 9.41873 11.4469 9.41873 11C9.41873 10.5875 9.07498 10.2094 8.6281 10.2094H6.77185V5.63749H8.6281C9.0406 5.63749 9.41873 5.29374 9.41873 4.84687C9.41873 4.39999 9.07498 4.05624 8.6281 4.05624H6.77185V2.74999C6.77185 2.40624 7.04685 2.13124 7.3906 2.13124H15.6406C15.9844 2.13124 16.2937 2.26874 16.5687 2.50937C16.8094 2.74999 16.9469 3.09374 16.9469 3.43749V18.5625Z"
                    fill="" />
                </svg>
                My Contacts
              </a>
            </li>
            <li>
              <a href="settings.html"
                class="flex items-center gap-3.5 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base">
                <svg class="fill-current" width="22" height="22" viewBox="0 0 22 22" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M20.8656 8.86874C20.5219 8.49062 20.0406 8.28437 19.525 8.28437H19.4219C19.25 8.28437 19.1125 8.18124 19.0781 8.04374C19.0437 7.90624 18.975 7.80312 18.9406 7.66562C18.8719 7.52812 18.9406 7.39062 19.0437 7.28749L19.1125 7.21874C19.4906 6.87499 19.6969 6.39374 19.6969 5.87812C19.6969 5.36249 19.525 4.88124 19.1469 4.50312L17.8062 3.12812C17.0844 2.37187 15.8469 2.33749 15.0906 3.09374L14.9875 3.16249C14.8844 3.26562 14.7125 3.29999 14.5406 3.23124C14.4031 3.16249 14.2656 3.09374 14.0937 3.05937C13.9219 2.99062 13.8187 2.85312 13.8187 2.71562V2.54374C13.8187 1.47812 12.9594 0.618744 11.8937 0.618744H9.96875C9.45312 0.618744 8.97187 0.824994 8.62812 1.16874C8.25 1.54687 8.07812 2.02812 8.07812 2.50937V2.64687C8.07812 2.78437 7.975 2.92187 7.8375 2.99062C7.76875 3.02499 7.73437 3.02499 7.66562 3.05937C7.52812 3.12812 7.35625 3.09374 7.25312 2.99062L7.18437 2.88749C6.84062 2.50937 6.35937 2.30312 5.84375 2.30312C5.32812 2.30312 4.84687 2.47499 4.46875 2.85312L3.09375 4.19374C2.3375 4.91562 2.30312 6.15312 3.05937 6.90937L3.12812 7.01249C3.23125 7.11562 3.26562 7.28749 3.19687 7.39062C3.12812 7.52812 3.09375 7.63124 3.025 7.76874C2.95625 7.90624 2.85312 7.97499 2.68125 7.97499H2.57812C2.0625 7.97499 1.58125 8.14687 1.20312 8.52499C0.824996 8.86874 0.618746 9.34999 0.618746 9.86562L0.584371 11.7906C0.549996 12.8562 1.40937 13.7156 2.475 13.75H2.57812C2.75 13.75 2.8875 13.8531 2.92187 13.9906C2.99062 14.0937 3.05937 14.1969 3.09375 14.3344C3.12812 14.4719 3.09375 14.6094 2.99062 14.7125L2.92187 14.7812C2.54375 15.125 2.3375 15.6062 2.3375 16.1219C2.3375 16.6375 2.50937 17.1187 2.8875 17.4969L4.22812 18.8719C4.95 19.6281 6.1875 19.6625 6.94375 18.9062L7.04687 18.8375C7.15 18.7344 7.32187 18.7 7.49375 18.7687C7.63125 18.8375 7.76875 18.9062 7.94062 18.9406C8.1125 19.0094 8.21562 19.1469 8.21562 19.2844V19.4219C8.21562 20.4875 9.075 21.3469 10.1406 21.3469H12.0656C13.1312 21.3469 13.9906 20.4875 13.9906 19.4219V19.2844C13.9906 19.1469 14.0937 19.0094 14.2312 18.9406C14.3 18.9062 14.3344 18.9062 14.4031 18.8719C14.575 18.8031 14.7125 18.8375 14.8156 18.9406L14.8844 19.0437C15.2281 19.4219 15.7094 19.6281 16.225 19.6281C16.7406 19.6281 17.2219 19.4562 17.6 19.0781L18.975 17.7375C19.7312 17.0156 19.7656 15.7781 19.0094 15.0219L18.9406 14.9187C18.8375 14.8156 18.8031 14.6437 18.8719 14.5406C18.9406 14.4031 18.975 14.3 19.0437 14.1625C19.1125 14.025 19.25 13.9562 19.3875 13.9562H19.4906H19.525C20.5562 13.9562 21.4156 13.1312 21.45 12.0656L21.4844 10.1406C21.4156 9.72812 21.2094 9.21249 20.8656 8.86874ZM19.8344 12.1C19.8344 12.3062 19.6625 12.4781 19.4562 12.4781H19.3531H19.3187C18.5281 12.4781 17.8062 12.9594 17.5312 13.6469C17.4969 13.75 17.4281 13.8531 17.3937 13.9562C17.0844 14.6437 17.2219 15.5031 17.7719 16.0531L17.8406 16.1562C17.9781 16.2937 17.9781 16.5344 17.8406 16.6719L16.4656 18.0125C16.3625 18.1156 16.2594 18.1156 16.1906 18.1156C16.1219 18.1156 16.0187 18.1156 15.9156 18.0125L15.8469 17.9094C15.2969 17.325 14.4719 17.1531 13.7156 17.4969L13.5781 17.5656C12.8219 17.875 12.3406 18.5625 12.3406 19.3531V19.4906C12.3406 19.6969 12.1687 19.8687 11.9625 19.8687H10.0375C9.83125 19.8687 9.65937 19.6969 9.65937 19.4906V19.3531C9.65937 18.5625 9.17812 17.8406 8.42187 17.5656C8.31875 17.5312 8.18125 17.4625 8.07812 17.4281C7.80312 17.2906 7.52812 17.2562 7.25312 17.2562C6.77187 17.2562 6.29062 17.4281 5.9125 17.8062L5.84375 17.8406C5.70625 17.9781 5.46562 17.9781 5.32812 17.8406L3.9875 16.4656C3.88437 16.3625 3.88437 16.2594 3.88437 16.1906C3.88437 16.1219 3.88437 16.0187 3.9875 15.9156L4.05625 15.8469C4.64062 15.2969 4.8125 14.4375 4.50312 13.75C4.46875 13.6469 4.43437 13.5437 4.36562 13.4406C4.09062 12.7187 3.40312 12.2031 2.6125 12.2031H2.50937C2.30312 12.2031 2.13125 12.0312 2.13125 11.825L2.16562 9.89999C2.16562 9.76249 2.23437 9.69374 2.26875 9.62499C2.30312 9.59062 2.40625 9.52187 2.54375 9.52187H2.64687C3.4375 9.55624 4.15937 9.07499 4.46875 8.35312C4.50312 8.24999 4.57187 8.14687 4.60625 8.04374C4.91562 7.35624 4.77812 6.49687 4.22812 5.94687L4.15937 5.84374C4.02187 5.70624 4.02187 5.46562 4.15937 5.32812L5.53437 3.98749C5.6375 3.88437 5.74062 3.88437 5.80937 3.88437C5.87812 3.88437 5.98125 3.88437 6.08437 3.98749L6.15312 4.09062C6.70312 4.67499 7.52812 4.84687 8.28437 4.53749L8.42187 4.46874C9.17812 4.15937 9.65937 3.47187 9.65937 2.68124V2.54374C9.65937 2.40624 9.72812 2.33749 9.7625 2.26874C9.79687 2.19999 9.9 2.16562 10.0375 2.16562H11.9625C12.1687 2.16562 12.3406 2.33749 12.3406 2.54374V2.68124C12.3406 3.47187 12.8219 4.19374 13.5781 4.46874C13.6812 4.50312 13.8187 4.57187 13.9219 4.60624C14.6437 4.94999 15.5031 4.81249 16.0875 4.26249L16.1906 4.19374C16.3281 4.05624 16.5687 4.05624 16.7062 4.19374L18.0469 5.56874C18.15 5.67187 18.15 5.77499 18.15 5.84374C18.15 5.91249 18.1156 6.01562 18.0469 6.11874L17.9781 6.18749C17.3594 6.70312 17.1875 7.56249 17.4625 8.24999C17.4969 8.35312 17.5312 8.45624 17.6 8.55937C17.875 9.28124 18.5625 9.79687 19.3531 9.79687H19.4562C19.5937 9.79687 19.6625 9.86562 19.7312 9.89999C19.8 9.93437 19.8344 10.0375 19.8344 10.175V12.1Z"
                    fill="" />
                  <path
                    d="M11 6.32498C8.42189 6.32498 6.32501 8.42186 6.32501 11C6.32501 13.5781 8.42189 15.675 11 15.675C13.5781 15.675 15.675 13.5781 15.675 11C15.675 8.42186 13.5781 6.32498 11 6.32498ZM11 14.1281C9.28126 14.1281 7.87189 12.7187 7.87189 11C7.87189 9.28123 9.28126 7.87186 11 7.87186C12.7188 7.87186 14.1281 9.28123 14.1281 11C14.1281 12.7187 12.7188 14.1281 11 14.1281Z"
                    fill="" />
                </svg>
                Account Settings
              </a>
            </li>
          </ul>
          <button onclick="logout()"
            class="flex items-center gap-3.5 px-6 py-4 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base">
            <svg class="fill-current" width="22" height="22" viewBox="0 0 22 22" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15.5375 0.618744H11.6531C10.7594 0.618744 10.0031 1.37499 10.0031 2.26874V4.64062C10.0031 5.05312 10.3469 5.39687 10.7594 5.39687C11.1719 5.39687 11.55 5.05312 11.55 4.64062V2.23437C11.55 2.16562 11.5844 2.13124 11.6531 2.13124H15.5375C16.3625 2.13124 17.0156 2.78437 17.0156 3.60937V18.3562C17.0156 19.1812 16.3625 19.8344 15.5375 19.8344H11.6531C11.5844 19.8344 11.55 19.8 11.55 19.7312V17.3594C11.55 16.9469 11.2062 16.6031 10.7594 16.6031C10.3125 16.6031 10.0031 16.9469 10.0031 17.3594V19.7312C10.0031 20.625 10.7594 21.3812 11.6531 21.3812H15.5375C17.2219 21.3812 18.5625 20.0062 18.5625 18.3562V3.64374C18.5625 1.95937 17.1875 0.618744 15.5375 0.618744Z"
                fill="" />
              <path
                d="M6.05001 11.7563H12.2031C12.6156 11.7563 12.9594 11.4125 12.9594 11C12.9594 10.5875 12.6156 10.2438 12.2031 10.2438H6.08439L8.21564 8.07813C8.52501 7.76875 8.52501 7.2875 8.21564 6.97812C7.90626 6.66875 7.42501 6.66875 7.11564 6.97812L3.67814 10.4844C3.36876 10.7938 3.36876 11.275 3.67814 11.5844L7.11564 15.0906C7.25314 15.2281 7.45939 15.3312 7.66564 15.3312C7.87189 15.3312 8.04376 15.2625 8.21564 15.125C8.52501 14.8156 8.52501 14.3344 8.21564 14.025L6.05001 11.7563Z"
                fill="" />
            </svg>
            Log Out
          </button>
        </div>-->
        <!-- Dropdown End -->
        <button onclick="logout()"
        class="flex items-center gap-3.5 px-6 py-4 text-sm font-medium duration-300 ease-in-out hover:text-primary lg:text-base">
        <svg class="fill-current" width="22" height="22" viewBox="0 0 22 22" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M15.5375 0.618744H11.6531C10.7594 0.618744 10.0031 1.37499 10.0031 2.26874V4.64062C10.0031 5.05312 10.3469 5.39687 10.7594 5.39687C11.1719 5.39687 11.55 5.05312 11.55 4.64062V2.23437C11.55 2.16562 11.5844 2.13124 11.6531 2.13124H15.5375C16.3625 2.13124 17.0156 2.78437 17.0156 3.60937V18.3562C17.0156 19.1812 16.3625 19.8344 15.5375 19.8344H11.6531C11.5844 19.8344 11.55 19.8 11.55 19.7312V17.3594C11.55 16.9469 11.2062 16.6031 10.7594 16.6031C10.3125 16.6031 10.0031 16.9469 10.0031 17.3594V19.7312C10.0031 20.625 10.7594 21.3812 11.6531 21.3812H15.5375C17.2219 21.3812 18.5625 20.0062 18.5625 18.3562V3.64374C18.5625 1.95937 17.1875 0.618744 15.5375 0.618744Z"
            fill="" />
          <path
            d="M6.05001 11.7563H12.2031C12.6156 11.7563 12.9594 11.4125 12.9594 11C12.9594 10.5875 12.6156 10.2438 12.2031 10.2438H6.08439L8.21564 8.07813C8.52501 7.76875 8.52501 7.2875 8.21564 6.97812C7.90626 6.66875 7.42501 6.66875 7.11564 6.97812L3.67814 10.4844C3.36876 10.7938 3.36876 11.275 3.67814 11.5844L7.11564 15.0906C7.25314 15.2281 7.45939 15.3312 7.66564 15.3312C7.87189 15.3312 8.04376 15.2625 8.21564 15.125C8.52501 14.8156 8.52501 14.3344 8.21564 14.025L6.05001 11.7563Z"
            fill="" />
        </svg>
        Log Out
      </button>
      </div>
      <!-- User Area -->
    </div>
  </div>
  <!-- Add this before </header> -->
  <div id="reminderModal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="relative min-h-screen flex items-center justify-center p-4">
      <div class="relative bg-white rounded-lg shadow-xl w-full max-w-md p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-medium">New Reminder</h3>
          <button onclick="closeReminderModal()" class="text-gray-400 hover:text-gray-500">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <!-- Dans la section form du modal -->
        <form id="newReminderForm" onsubmit="createReminder(event)" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Title *</label>
            <input type="text" name="title" required
                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700">Due Date & Time *</label>
            <input type="datetime-local" name="due_date" required
                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700">Priority</label>
            <select name="priority" 
                    class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          
          
          
          <div>
            <label class="block text-sm font-medium text-gray-700">Notes</label>
            <textarea name="notes" rows="3" 
                      class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
          </div>
          
          <div class="flex justify-end gap-3">
            <button type="button" onclick="closeReminderModal()"
                    class="px-4 py-2 text-gray-600 hover:text-gray-800">
              Cancel
            </button>
            <button type="submit"
                    class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
              Create
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</header>
<!--Switcher de langues-->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script type="text/javascript">
// Update reminder counts
async function updateReminderCounts() {
    try {
        const response = await apiClient.get('/api/reminders/counts/', {
            withCredentials: true,
            headers: {
                'X-CSRFToken': Cookies.get('csrftoken')
            }
        });
        
        const counts = response.data;
        
        // Update Alpine store
        if (window.Alpine && window.Alpine.store('counts')) {
            Object.entries(counts).forEach(([key, value]) => {
                window.Alpine.store('counts')[key] = value;
            });
        }
        
        // Update UI elements
        Object.entries(counts).forEach(([key, value]) => {
            const elements = document.querySelectorAll(`[x-text="$store.counts.${key}"]`);
            elements.forEach(el => {
                el.textContent = value;
            });
        });
        
        // Update reminder badge
        const reminderCount = document.getElementById('reminderCount');
        if (reminderCount) {
            reminderCount.textContent = counts.today;
            reminderCount.style.display = counts.today > 0 ? 'flex' : 'none';
        }
    } catch (error) {
        console.error('Error updating reminder counts:', error);
    }
}
    function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    includedLanguages: 'en,fr,de,it,sw,zh-CN,ar', 
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
    autoDisplay: false,
    gaTrack: true
  }, 'google_translate_element');
  
  // Add custom class to parent element after initialization
  setTimeout(() => {
    const selectElement = document.querySelector('.goog-te-combo');
    if (selectElement) {
      selectElement.classList.add('translate-select');
    }
  }, 100);
}
    </script>
        <script src="js/notification.js" defer></script>
        <script src="js/reminder.js" defer></script>



    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
async function toggleFlag(button) {
  // Get the closest parent element with a reminder ID
  const reminderElement = button.closest('[data-reminder-id]');
  if (!reminderElement) {
    console.error('Could not find reminder element');
    return;
  }
  
  const reminderId = reminderElement.dataset.reminderId;
  if (!reminderId) {
    console.error('No reminder ID found');
    return;
  }

  const checkbox = button.parentElement.querySelector('input[type="checkbox"]');
  const previousState = checkbox.checked;
  
  try {
    console.log('Updating flag for reminder:', reminderId); // Debug log
    
    // Update UI immediately
    button.classList.toggle('active');
    checkbox.checked = !previousState;
    
    if (checkbox.checked) {
      button.querySelector('.flag-icon').style.color = '#EF4444';
      button.querySelector('.flag-icon').style.fill = '#EF4444';
    } else {
      button.querySelector('.flag-icon').style.color = '#9CA3AF';
      button.querySelector('.flag-icon').style.fill = 'none';
    }

    // Make API call
    const response = await apiClient.post('/api/reminders/update-flag/', {
      reminder_id: reminderId,
      is_flagged: checkbox.checked
    }, {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken'),
        'Content-Type': 'application/json'
      }
    });

    console.log('Flag update response:', response.data); // Debug log

    // Update counts
    if (window.Alpine && window.Alpine.store('counts')) {
      const currentCount = parseInt(window.Alpine.store('counts').flagged || '0');
      const newCount = checkbox.checked ? currentCount + 1 : Math.max(0, currentCount - 1);
      window.Alpine.store('counts').flagged = newCount;
      
      // Update UI elements
      document.querySelectorAll('[x-text="$store.counts.flagged"]')
        .forEach(el => el.textContent = newCount);
    }

    await updateReminderCounts();

  } catch (error) {
    console.error('Error updating flag status:', error);
    // Revert UI on error
    button.classList.toggle('active');
    checkbox.checked = previousState;
    if (checkbox.checked) {
      button.querySelector('.flag-icon').style.color = '#EF4444';
      button.querySelector('.flag-icon').style.fill = '#EF4444';
    } else {
      button.querySelector('.flag-icon').style.color = '#9CA3AF';
      button.querySelector('.flag-icon').style.fill = 'none';
    }
    await updateReminderCounts();
  }
}








// Update the fetchReminders function to handle flagged reminders
async function fetchReminders(filter) {
  try {
    const url = filter === 'flagged' 
      ? '/api/reminders/flagged/'
      : `/api/reminders/${filter}/`;
      
    const response = await apiClient.get(url, {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken')
      }
    });
    
    return response.data;
  } catch (error) {
    console.error('Error fetching reminders:', error);
    throw error;
  }
}

// Update the getAllReminders function to handle the response
function getAllReminders() {
  const remindersList = document.getElementById("remindersList");
  if (!remindersList) {
    console.error('Element remindersList not found');
    return;
  }
  
  remindersList.innerHTML = '';
  
  fetchReminders('today')
    .then((reminders) => {
      if (reminders.length === 0) {
        remindersList.innerHTML = '<li class="px-4.5 py-3 text-sm text-gray-500">No reminders for today</li>';
        return;
      }
      
      reminders.forEach((reminder) => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.className = "flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4";
        
        // Add flag indicator if reminder is flagged
        if (reminder.is_flagged) {
          const flagIcon = document.createElement('div');
          flagIcon.className = 'absolute right-4 text-red-500';
          flagIcon.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M3 6a2 2 0 012-2h6.5l1 1H19l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2v4"></path>
          </svg>`;
          a.appendChild(flagIcon);
        }
        
        // Rest of the reminder rendering code...
        const contentDiv = document.createElement('div');
        contentDiv.className = 'flex flex-col';
        
        const title = document.createElement('p');
        title.className = 'text-sm font-medium text-black dark:text-white';
        title.textContent = reminder.title;
        
        const notes = document.createElement('p');
        notes.className = 'text-xs text-gray-500';
        notes.textContent = reminder.notes || 'No description';
        
        const date = document.createElement('p');
        date.className = 'text-xs text-gray-400';
        const dueDate = new Date(reminder.due_date);
        date.textContent = reminder.due_date ? `Due ${dueDate.toLocaleTimeString()}` : 'No due date';
        
        contentDiv.appendChild(title);
        contentDiv.appendChild(notes);
        contentDiv.appendChild(date);
        
        a.appendChild(contentDiv);
        li.appendChild(a);
        remindersList.appendChild(li);
      });
    })
    .catch((error) => {
      console.error("Error loading reminders:", error);
      remindersList.innerHTML = '<li class="px-4.5 py-3 text-sm text-red-500">Error loading reminders</li>';
    });
}








// Update loadHeaderReminders function
async function loadHeaderReminders() {
  const remindersList = document.getElementById("remindersList");
  if (!remindersList) {
    // If we're not on a page with the remindersList, just update counts
    await updateReminderCounts();
    return;
  }
  
  try {
    const response = await apiClient.get('/api/reminders/today/', {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken')
      }
    });
    
    remindersList.innerHTML = '';
    const reminders = response.data;
    
    if (reminders.length === 0) {
      remindersList.innerHTML = '<li class="px-4.5 py-3 text-sm text-gray-500">No reminders for today</li>';
      return;
    }
    
    reminders.forEach((reminder) => {
      const li = document.createElement("li");
      const a = document.createElement("a");
      a.className = "flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4";
      
      // Add flag indicator if reminder is flagged
      if (reminder.is_flagged) {
        const flagIcon = document.createElement('div');
        flagIcon.className = 'absolute right-4 text-red-500';
        flagIcon.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M3 6a2 2 0 012-2h6.5l1 1H19l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2v4"></path>
        </svg>`;
        a.appendChild(flagIcon);
      }
      
      const contentDiv = document.createElement('div');
      contentDiv.className = 'flex flex-col';
      
      const title = document.createElement('p');
      title.className = 'text-sm font-medium text-black dark:text-white';
      title.textContent = reminder.title;
      
      const notes = document.createElement('p');
      notes.className = 'text-xs text-gray-500';
      notes.textContent = reminder.notes || 'No description';
      
      const date = document.createElement('p');
      date.className = 'text-xs text-gray-400';
      const dueDate = new Date(reminder.due_date);
      date.textContent = reminder.due_date ? `Due ${dueDate.toLocaleTimeString()}` : 'No due date';
      
      contentDiv.appendChild(title);
      contentDiv.appendChild(notes);
      contentDiv.appendChild(date);
      
      a.appendChild(contentDiv);
      li.appendChild(a);
      remindersList.appendChild(li);
    });
    
    // Update counts after loading reminders
    await updateReminderCounts();
    
  } catch (error) {
    console.error("Error loading reminders:", error);
    if (remindersList) {
      remindersList.innerHTML = '<li class="px-4.5 py-3 text-sm text-red-500">Error loading reminders</li>';
    }
  }
}
// Modifiez la fonction existante getAllReminders pour utiliser loadHeaderReminders
async function getAllReminders() {
  await loadHeaderReminders();
  await updateUICounts();
}
  const apiClient = axios.create({
  baseURL: 'http://localhost:8000',
    headers: {
    'Content-Type': 'application/json',
        'Accept': 'application/json'
    },
    withCredentials: true  // Important pour les cookies de session
});apiClient.interceptors.response.use(
    response => response,
    error => {
        console.error('API Error:', error);
        
        // Ne redirigez vers signin que si c'est explicitement n√©cessaire
        if (error.response?.status === 403 && 
            !error.config.url.includes('get-candidate')) {
      window.location.href = "signin.html";
      localStorage.clear();
    }
        
    return Promise.reject(error); 
  }
);
console.log("Header script running!");
let recruiterDataHeader = JSON.parse(localStorage.getItem("recruiterDataHeader"));
if(!recruiterDataHeader){
  getRecruiter();
}
else{
  const userImage = document.getElementById("imgUser");
  userImage.src = `data:image/jpeg;base64,${recruiterDataHeader.image}`;
  const recruiterName = document.getElementById("recruiterName");
  recruiterName.textContent = `${recruiterDataHeader.first_name} ${recruiterDataHeader.last_name}`;
  const recruiterPosition = document.getElementById("recruiterPosition");
  recruiterPosition.textContent = recruiterDataHeader.position || "__";
}
function getNotifications() {
  const notification = document.getElementById("notification");
  if (!notification) {
    console.error('Element notification non trouv√©');
    return;
  }
  
  notification.innerHTML = '';
  
  // Utiliser l'URL correcte
  apiClient.get('/api/get-notifications/', {
        withCredentials: true,
    headers: {
      'X-CSRFToken': Cookies.get('csrftoken')
  }
  })
  .then((response) => {
    console.log('R√©ponse notifications:', response.data);
    const data = response.data;
    
    data.forEach((element) => {
      const li = document.createElement("li");
      const a = document.createElement("a");
      a.className = "flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 cursor-pointer dark:border-strokedark dark:hover:bg-meta-4";
      
      a.onclick = async function() {
        try {
          // V√©rifier que l'on a un job_id valide
          if (!element.job_id) {
            notifications.showError('Notification invalide : pas de job associ√©');
            return;
          }

          await apiClient.post(`/api/notifications/${element.id_notification}/mark-read/`, {}, {
            withCredentials: true,
            headers: {
              'X-CSRFToken': Cookies.get('csrftoken')
            }
          });

          if (element.type === 'job_assignment' && element.job_id) {
            localStorage.setItem('fromNotification', 'true');
            localStorage.setItem('notificationJobId', element.job_id);
            window.location.href = `job-details-restricted.html?jobId=${element.job_id}&restricted=true`;
          } else {
            console.log('Type de notification non g√©r√©:', element);
            notifications.showError('Type de notification non support√©');
          }
        } catch (error) {
          console.error('Erreur lors du traitement de la notification:', error);
          notifications.showError('Erreur lors du traitement de la notification');
        }
      };

      const info = document.createElement("span");
      info.className = "text-black dark:text-white";
      info.textContent = `${element.recruiter_name} ${element.content}`;
      
      const date = document.createElement("p");
      date.className = "text-xs";
      date.textContent = element.date;

      // Ajouter un indicateur pour les notifications non lues
      if (!element.is_read) {
        const unreadIndicator = document.createElement('div');
        unreadIndicator.className = 'w-2 h-2 bg-blue-500 rounded-full absolute right-4';
        a.appendChild(unreadIndicator);
      }

      a.appendChild(info);
      a.appendChild(date);
      li.appendChild(a);
      notification.appendChild(li);
    });
  })
  .catch((error) => {
    console.error("Erreur lors du chargement des notifications:", error);
    notification.innerHTML = '<p class="text-red-500 p-4">Erreur lors du chargement des notifications</p>';
  });
}
function getRecruiter() {

  console.log("executing get recruiter");
  apiClient
    .get(`/api/get-Header/`,{withCredentials: true})
    .then(function (response) {
      recruiterDataHeader = response.data;
      // Save the candidate data to localStorage
      localStorage.setItem("recruiterDataHeader", JSON.stringify(recruiterDataHeader));
      const userImage = document.getElementById("imgUser");
      userImage.src = `data:image/jpeg;base64,${recruiterDataHeader.image}`;
      const recruiterName = document.getElementById("recruiterName");
      recruiterName.textContent = `${recruiterDataHeader.first_name} ${recruiterDataHeader.last_name}`;
      const recruiterPosition = document.getElementById("recruiterPosition");
      recruiterPosition.textContent = recruiterDataHeader.position || "__";

      // Redirect to profile.html

    })
    .catch(function (error) {
      // if(error.response && error.response.status === 403){
      //     window.location.href = "signin.html";
      //   }
    });
}

function profileRecruiter() {
  localStorage.setItem('recruiterData', JSON.stringify(recruiterDataHeader));
    setTimeout(() => {
        window.location.href = "profile-recruiter.html";
    }, 50); // Delay of 50ms

}
function deleteCookie(name) {
    document.cookie = `${name}=; Max-Age=0; path=/; domain=localhost`;
}

function logout() {
  axios
    .get(`http://localhost:8000/api/logout/`,{withCredentials: true})
    .then(function (response) {

      localStorage.clear();
      deleteCookie('sessionid');
      deleteCookie('csrftoken');
      // Redirect to profile.html
      window.location.href = "signin.html";
    })
    .catch(function (error) {
      console.error("Error fetching recruiter data:", error);
      alert("Failed to fetch recruiter data. Please try again.");
    });

}
</script>
<script>
  // Add these functions in your existing <script> section

    function showNewReminderModal() {
  const modal = document.getElementById('reminderModal');
  modal.classList.remove('hidden');
  loadReminderLists();
}

function closeReminderModal() {
  const modal = document.getElementById('reminderModal');
  modal.classList.add('hidden');
  document.getElementById('newReminderForm').reset();
}

async function loadReminderLists() {
  try {
    const response = await apiClient.get('/api/reminder-lists/', {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken')
      }
    });
    
    const select = document.getElementById('reminderList');
    select.innerHTML = '';
    
    response.data.forEach(list => {
      const option = document.createElement('option');
      option.value = list.id;
      option.textContent = list.title;
      select.appendChild(option);
    });
  } catch (error) {
    console.error('Error loading reminder lists:', error);
    notifications.showError('Failed to load reminder lists');
  }
}
// Fonction pour mettre √† jour le compteur de rappels
// Fonction pour mettre √† jour le compteur de rappels
async function updateReminderCount() {
  try {
    const response = await apiClient.get('/api/reminders/today/', {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken')
      }
    });
    
    const reminderCount = document.getElementById('reminderCount');
    if (reminderCount) {
      reminderCount.textContent = response.data.length;
      reminderCount.style.display = response.data.length > 0 ? 'flex' : 'none';
    }
  } catch (error) {
    console.error('Error updating reminder count:', error);
  }
}
// Appeler la fonction au chargement et apr√®s cr√©ation/suppression de rappels
document.addEventListener('DOMContentLoaded', updateReminderCount);
// First, let's add debug logging
// Replace the createReminder function in header.html
async function createReminder(event) {
    event.preventDefault();
    
    try {
        const form = event.target;
        const dueDate = form.due_date.value;
        
        if (!dueDate) {
            alert('Please select a due date for the reminder');
            return;
        }

        const dateObj = new Date(dueDate);
        
        const reminderData = {
            title: form.title.value,
            notes: form.notes.value || "",
            due_date: dateObj.toISOString(),
            priority: form.priority.value || "medium",
            is_completed: false,
            is_flagged: form.querySelector('input[name="is_flagged"]')?.checked || false,
            list: 34  // Ensure this list ID exists
        };
        
        console.log('Creating reminder with data:', reminderData);
        
        const response = await apiClient.post('/api/reminders/create/', reminderData, {
            withCredentials: true,
            headers: {
                'X-CSRFToken': Cookies.get('csrftoken'),
                'Content-Type': 'application/json'
            }
        });
        
        console.log('Created reminder:', response.data);
        
        closeReminderModal();
        document.dispatchEvent(new CustomEvent('reminderCreated', {
            detail: response.data
        }));
        
        const calendarInstance = document.querySelector('[x-data="calendar"]')?.__x.$data;
        if (calendarInstance) {
            console.log('Refreshing calendar after reminder creation');
            await calendarInstance.refreshCalendar();
        }
        
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow z-50';
        notification.textContent = 'Reminder created successfully';
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);

        await updateUICounts();
        
        return response.data;
    } catch (error) {
        console.error('Error creating reminder:', error);
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow z-50';
        notification.textContent = 'Failed to create reminder';
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);
    }
}

// Add this helper function
async function refreshCalendar() {
    const calendarInstance = document.querySelector('[x-data="calendar"]')?.__x.$data;
    if (calendarInstance) {
        console.log('Refreshing calendar...');
        await calendarInstance.loadReminders();
        calendarInstance.generateCalendar();
    }
}
// Helper function for notifications
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `fixed bottom-4 right-4 px-4 py-2 rounded shadow z-50 ${
        type === 'success' ? 'bg-green-500' : 'bg-red-500'
    } text-white`;
    notification.textContent = message;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}
// In reminder.js where you handle the createList function

async function createList() {
  try {
    const response = await apiClient.post('/api/lists/create/', {  // Corrected URL
      title: this.newListTitle
    }, {
      withCredentials: true,
      headers: {
        'X-CSRFToken': Cookies.get('csrftoken'),
        'Content-Type': 'application/json'
      }
    });

    if (response.status === 201) {
      // Handle successful creation
      this.userLists.push(response.data);
      this.closeModal();
    } else {
      console.error('Error creating list:', response.data);
    }
  } catch (error) {
    console.error('API Error: ', error);
  }
}
// Helper function to update UI counts
async function updateUICounts() {
    try {
        // Use the correct endpoint for reminders
        const response = await apiClient.get('/api/reminders/', {
            withCredentials: true,
            headers: { 'X-CSRFToken': Cookies.get('csrftoken') }
        });
        
        const reminders = response.data;
        const today = new Date().toDateString();
        
        // Calculate counts
        const counts = {
            today: reminders.filter(r => new Date(r.due_date).toDateString() === today).length,
            flagged: reminders.filter(r => r.is_flagged).length,
            completed: reminders.filter(r => r.is_completed).length,
            scheduled: reminders.filter(r => new Date(r.due_date) > new Date()).length
        };
        
        // Update UI elements
        Object.entries(counts).forEach(([key, value]) => {
            const element = document.querySelector(`[x-text="counts.${key}"]`);
            if (element) {
                element.textContent = value;
            }
        });
        
        // Update reminder count badge
        const reminderCount = document.getElementById('reminderCount');
        if (reminderCount) {
            reminderCount.textContent = counts.today;
            reminderCount.style.display = counts.today > 0 ? 'flex' : 'none';
        }
        
        return counts;
    } catch (error) {
        console.error('Error updating counts:', error);
    }
}

function showNewReminderModal() {
  const modal = document.getElementById('reminderModal');
  modal.classList.remove('hidden');
}

// Helper function to close modal
function closeReminderModal() {
  const modal = document.getElementById('reminderModal');
  modal.classList.add('hidden');
  document.getElementById('newReminderForm').reset();
}



  document.addEventListener('alpine:init', () => {
    Alpine.store('counts', {
        today: 0,
        scheduled: 0,
        flagged: 0,
        completed: 0,
        updateCount(type, value) {
            this[type] = value;
        }
    });

      Alpine.data('search', () => ({
          query: '',
          results: [],
          loading: false,
          showResults: false,
          error: null,
          
          async performSearch() {
            console.log('Query:', this.query);
              if (!this.query.trim()) {
                  this.results = [];
                  this.showResults = false;
                  return;
              }
              
              this.loading = true;
              this.showResults = true;
              this.error = null;
              
              try {
                  const response = await fetch(`http://localhost:8000/api/search/?q=${encodeURIComponent(this.query)}`, {
                      method: 'GET',
                      headers: {
                          'Accept': 'application/json',
                          'X-Requested-With': 'XMLHttpRequest',
                          'Content-Type': 'application/json'
                      }
                  });
                  
                  if (!response.ok) {
                      throw new Error(`HTTP error! status: ${response.status}`);
                  }
                  
                  const data = await response.json();
                  this.results = data.results;
                  
                  if (this.results.length === 0) {
                      this.error = 'No results found';
                  }
              } catch (error) {
                  console.error('Search error:', error);
                  this.error = 'Search failed. Please try again.';
                  this.results = [];
              } finally {
                  this.loading = false;
              }
          },
  
          async handleResultClick(result) {
    console.log('Starting handleResultClick with:', result);
    try {
          if (result.type === 'candidate') {
            // Gestion des candidats
            const response = await apiClient.get(`/api/get-candidate/${result.id}/`, {
                withCredentials: true,
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'X-CSRFToken': Cookies.get('csrftoken')
                }
            });

            if (response.data) {
                localStorage.setItem('responseData', JSON.stringify(response.data));
                window.location.href = `profile.html?candidateId=${result.id}`;
            }
        } 
        else if (result.type === 'job') {
            // Gestion des jobs
            const response = await apiClient.get(`/job/get-job/${result.id}/`, {
                withCredentials: true,
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'X-CSRFToken': Cookies.get('csrftoken')
                }
            });

            if (response.data) {
                // Stocker les donn√©es du job
                localStorage.setItem('jobData', JSON.stringify(response.data));
                
                // Rediriger vers la page des d√©tails du job
                window.location.href = "job-details.html";
            }
        }
        else if (result.type === 'client') {
                      const response = await apiClient.get(`/${result.id}/get-client/`, {

                        withCredentials: true,
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json',
                            'X-CSRFToken': Cookies.get('csrftoken')
                        }
                    });
 
                    if (response.data) {
                        localStorage.setItem('clientData', JSON.stringify(response.data));
                        window.location.href = "profile-client.html";
          }
                

        }
    } catch (error) {
        console.error('Error in handleResultClick:', error);
        console.error('Request URL:', error.config?.url);
        console.error('Request details:', error.config);
        this.error = `Failed to load ${result.type} details`;
    }
      },
          // When search icon or "See all results" is clicked
          viewAllResults() {
              if (this.query.trim()) {
                  window.location.href = `/search/results/?q=${encodeURIComponent(this.searchQuery)}`;
              }
          },
  
          init() {
              let debounceTimeout;
              this.$watch('query', () => {
                  clearTimeout(debounceTimeout);
                  debounceTimeout = setTimeout(() => {
                      this.performSearch();
                  }, 300);
              });
  
              // If we're on the results page, perform search immediately
              if (window.location.pathname === '/search/results/') {
                  const urlParams = new URLSearchParams(window.location.search);
                  const query = urlParams.get('q');
                  if (query) {
                      this.query = query;
                      this.performSearch();
                  }
              }
          }
      }));
  });
  </script>


<!-- <li>
  <a
    class="flex flex-col gap-2.5 border-t border-stroke px-4.5 py-3 hover:bg-gray-2 dark:border-strokedark dark:hover:bg-meta-4"
    href="#"
  >
    <p class="text-sm">
      <span class="text-black dark:text-white"
        >Edit your information in a swipe</span
      >
      Sint occaecat cupidatat non proident, sunt in culpa qui
      officia deserunt mollit anim.
    </p>

    <p class="text-xs">12 May, 2025</p>
  </a>
</li> -->